import pytest
from fastapi.testclient import TestClient
from src.routes import router


@pytest.fixture(scope="module")
def client():
    with TestClient(router) as client:
        yield client


@pytest.fixture(scope="module")
def test_user():
    return {"username": "Dummy1", "password": "Password@1234"}


def test_token(db, test_user, client):
    result = client.post("/token", data=test_user)
    assert result.status_code == 200
